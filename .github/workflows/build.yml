name: Build Storybook

on:
  push:
    branches:
      - deploy

jobs:
  build:
    runs-on: ubuntu-latest
    timeout-minutes: 20
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Install All
        run: npm i
      - name: Install Local
        run: cd packages/docs && npm i
      - name: Build All
        run: npm run build
      - name: Merge development -> prod
        uses: devmasx/merge-branch@master
        with:
          type: now
          target_branch: prod
          github_token: ${{ secrets.GITHUB_TOKEN }}
